<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>–§–æ–ª–∏–∞–Ω—Ç ‚Äî —Å–∏—Å—Ç–µ–º–∞ —É—á—ë—Ç–∞ –∫–Ω–∏–≥</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/app/static/css/style.css">
</head>
<body>
    <header class="topbar">
        <div class="container">
            <div class="brand-container">
                <img src="/app/static/images/logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø –§–æ–ª–∏–∞–Ω—Ç" class="brand-logo" />
                <h1 class="brand">–§–æ–ª–∏–∞–Ω—Ç</h1>
            </div>
            <div class="controls">
                <input id="search" type="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –∞–≤—Ç–æ—Ä—É‚Ä¶" />
                <select id="sort">
                    <option value="title">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –Ω–∞–∑–≤–∞–Ω–∏–µ</option>
                    <option value="author">–ü–æ –∞–≤—Ç–æ—Ä—É</option>
                    <option value="genre">–ü–æ –∂–∞–Ω—Ä—É</option>
                    <option value="year_desc">–ì–æ–¥ (—É–±—ã–≤.)</option>
                    <option value="year_asc">–ì–æ–¥ (–≤–æ–∑—Ä.)</option>
                </select>
                <div class="auth" id="authControls">
                    <button id="btnLogin" class="btn primary">–í–æ–π—Ç–∏</button>
                    <button id="btnRegister" class="btn secondary ghost">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                    <div id="userBadge" style="display:none;">
                        <span id="userName"></span> ¬∑ <button id="btnLogout" class="ghost">–í—ã–π—Ç–∏</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="container main">
        <aside class="sidebar">
            <div class="card">
                <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                <div id="stats">–ó–∞–≥—Ä—É–∂–∞—é‚Ä¶</div>
            </div>
            <div class="card">
                <h2>–§–∏–ª—å—Ç—Ä—ã</h2>
                <label>–ì–æ–¥ –æ—Ç <input id="yearFrom" type="number" min="0" placeholder="1990"></label>
                <label>–¥–æ <input id="yearTo" type="number" min="0" placeholder="2025"></label>
                <button id="applyFilters" class="btn primary small">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                <button id="clearFilters" class="btn secondary ghost small">–°–±—Ä–æ—Å</button>
            </div>
            <div class="card small">
                <h3>–í—Å–µ–≥–æ –∫–Ω–∏–≥</h3>
                <div id="totalCount">0</div>
            </div>
        </aside>

        <section class="content">
            <div class="toolbar">
                <button id="addRandom" class="btn primary">–î–æ–±–∞–≤–∏—Ç—å —Å–ª—É—á–∞–π–Ω—É—é –∫–Ω–∏–≥—É</button>
                <div class="view-info" id="viewInfo">–ü–æ–∫–∞–∑–∞–Ω–æ 0 –∏–∑ 0</div>
            </div>

            <div id="bookGrid" class="grid" aria-live="polite">
                <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –∫–Ω–∏–≥ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
            </div>

            <footer class="pagination">
                <button id="prevPage" class="btn secondary">&larr; –ù–∞–∑–∞–¥</button>
                <span id="pageInfo">1 / 1</span>
                <button id="nextPage" class="btn secondary">–í–ø–µ—Ä—ë–¥ &rarr;</button>
            </footer>
        </section>
    </main>

    <footer class="site-footer">
        <div class="container footer-inner">
            <div class="support">
                –¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞: <a href="mailto:support@foliant.local">support@foliant.local</a> ¬∑ –¢–µ–ª. +7 (495) 123‚Äë45‚Äë67
            </div>
            <div class="meta">
                Foliant v1.0 ¬∑ ¬© <span id="year"></span>
            </div>
        </div>
    </footer>

    <!-- –®–∞–±–ª–æ–Ω –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–Ω–∏–≥–∏ -->
    <template id="bookCard">
        <article class="book" tabindex="0" data-book-id="">
            <div class="cover" data-color="" aria-hidden="true"></div>
            <div class="meta">
                <h3 class="title"></h3>
                <p class="author"></p>
                <p class="description" aria-hidden="true"></p>
                <div><span class="year year-pill"></span></div>
                <p class="genre" aria-hidden="true"></p>
                <div class="comments" aria-live="polite">
                    <div class="comments-list"></div>
                    <div class="comments-form" style="display: none;">
                        <input class="comment-input" placeholder="–û—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π‚Ä¶" maxlength="200" />
                        <button class="comment-add btn primary small">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                        <button class="read-toggle btn secondary ghost small">–ß–∏—Ç–∞—Ç—å</button>
                    </div>
                </div>
            </div>
            <div class="badge" aria-hidden="true">üí¨ 0</div>
        </article>
    </template>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–µ—Ç–∞–ª–µ–π –∫–Ω–∏–≥–∏ -->
    <div id="bookModal" class="book-modal" aria-hidden="true">
        <div class="book-modal-overlay" onclick="closeBookModal()"></div>
        <div class="book-modal-content">
            <button class="book-modal-close" aria-label="–ó–∞–∫—Ä—ã—Ç—å" onclick="closeBookModal()">‚úï</button>
            
            <div class="book-modal-header">
                <div class="book-modal-cover" id="modalCover"></div>
                <div class="book-modal-title-section">
                    <h1 id="modalTitle" class="book-modal-title"></h1>
                    <p id="modalAuthor" class="book-modal-author"></p>
                    <div class="book-modal-meta-info">
                        <span class="badge-info"><strong>–ì–æ–¥:</strong> <span id="modalYear"></span></span>
                        <span class="badge-info"><strong>–ñ–∞–Ω—Ä:</strong> <span id="modalGenre"></span></span>
                    </div>
                </div>
            </div>

            <div class="book-modal-body">
                <div class="book-modal-section">
                    <h3>–û–ø–∏—Å–∞–Ω–∏–µ</h3>
                    <p id="modalDescription" class="book-modal-description"></p>
                </div>

                <div class="book-modal-section">
                    <h3>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (<span id="modalCommentsCount">0</span>)</h3>
                    <div id="modalCommentsList" class="book-modal-comments"></div>
                </div>

                <div class="book-modal-section" id="addCommentSection" style="display: none;">
                    <h3>–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</h3>
                    <div class="book-modal-comment-form">
                        <textarea 
                            id="modalCommentInput" 
                            class="book-modal-textarea" 
                            placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..." 
                            maxlength="500"
                            rows="4"></textarea>
                        <button id="modalCommentSubmit" class="btn primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</button>
                    </div>
                </div>
            </div>

            <div class="book-modal-actions">
                <button id="modalReadToggle" class="btn secondary ghost" style="display: none;">
                    <span class="read-text">üìñ –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ</span>
                </button>
                <button class="btn secondary" onclick="closeBookModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
    <div id="authModal" class="modal" aria-hidden="true">
        <div class="modal-inner">
            <button class="modal-close" aria-label="–ó–∞–∫—Ä—ã—Ç—å" id="authClose">&times;</button>
            <header class="modal-header">
                <h3 id="modalTitle">–í—Ö–æ–¥</h3>
                <p class="muted small">–î–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è"</p>
            </header>
            <div id="authContent" class="auth-content">
                <!-- –§–æ—Ä–º–∞ –±—É–¥–µ—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ JavaScript -->
            </div>
            <div class="modal-actions">
                <button id="authSubmit" class="btn primary">–í–æ–π—Ç–∏</button>
                <button id="authCancel" class="btn secondary ghost">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
    <div id="notifications-container"></div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏ JavaScript -->
    <script src="/app/static/js/notifications.js"></script>
    <script src="/app/static/js/auth.js"></script>
    <script src="/app/static/js/app.js"></script>
    
    <script>
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π –≥–æ–¥
        document.getElementById('year').textContent = new Date().getFullYear();
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM –∑–∞–≥—Ä—É–∂–µ–Ω, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
            if (typeof window.app !== 'undefined' && window.app.init) {
                window.app.init();
            } else {
                console.error('–ú–æ–¥—É–ª—å app –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
                document.getElementById('bookGrid').innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                        <h3>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h3>
                        <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É</p>
                    </div>
                `;
            }
        });
    </script>
</body>
</html>